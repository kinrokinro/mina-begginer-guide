<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Mina - Begginers Guide</title>
    <meta name="description" content="The complete guide for Mina Protocol testnet node set-up">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="apple-touch-icon" sizes="57x57" href="./apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="./apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="./apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="./apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="./apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="./apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="./apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="./apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="./android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="./favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./favicon-16x16.png">
    <link rel="manifest" href="./manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="./ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <!-- Facebook Meta Tags -->
    <meta property="og:url" content="https://www.minanode.info">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Mina - Beginners Guide">
    <meta property="og:description" content="The complete guide for Mina Protocol testnet node set-up">
    <meta property="og:image" content="">

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="minanode.info">
    <meta property="twitter:url" content="https://www.minanode.info">
    <meta name="twitter:title" content="Mina - Beginners Guide">
    <meta name="twitter:description" content="The complete guide for Mina Protocol testnet node set-up">
    <meta name="twitter:image" content="">
</head>

<body>
    <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
    <div class="language-container">
        <a href="./ru">Russian</a>
    </div>
    <div class="container">
        <img src="img/logotestworld.svg" class="img-fluid logo-image" alt="Logo">
        <div class="row">
            <div class="col-sm">
                <div class="alert alert-success text-center">
                    <p class="mb-0">Latest version: [DIRTY]d44a1339bdbdd5ebe747124c7146f435a3f73453</p>
                    <!-- <p class="mb-0">Время релиза: 09.01.2021 at 06:49 AM UTC</p> -->
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm">
                <p class="text-center">This guide was created for anyone who wants to set-up Mina node.</p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm mb-5">
                <h3>Requirement:</h3>
                <ul>
                    <li>Server requirement:</li>
                    <ul>
                        <li>CPU: min. 8 cores (or vCPU)</li>
                        <li>RAM: min. 16 Gb (32Gb or more recommended)
                        </li>
                        <li>OS: Ubuntu 18.04</li>
                    </ul>
                    <li>Mina email with Testworld invitation.</li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="container">
                <div class="col-sm mb-5">
                    <h3>0. Rent a Server</h3>
                    <button type="button" class="btn btn-primary" id="vpsButton">Press to show</button><br>
                    <div id="vpsContent" class="d-none mb-3">
                        As a first step we need to rent a server (VPS). I recommend <a
                            href="https://www.vultr.com/?ref=8671282">Vultr.com</a>.<br>
                        <strong>Registation</strong><br>
                        Go to the <a href="https://www.vultr.com/?ref=8671282">site</a>, click Sign Up<br>
                        <img src="img/vps/1.png" class="img-fluid mb-2" alt="VPS Installing 1"><br>
                        Fill the form, click Create Account:<br>
                        <img src="img/vps/2.png" class="img-fluid mb-2" alt="VPS Installing 2"><br>
                        On the 'Products' page click Plus button:<br>
                        <img src="img/vps/3.png" class="img-fluid mb-2" alt="VPS Installing 3"><br>
                        We need at least 8vCPU and 16Gb RAM server, let's chose the closest one:<br>
                        <img src="img/vps/4.png" class="img-fluid mb-2" alt="VPS Installing 4"><br>
                        <img src="img/vps/5.png" class="img-fluid mb-2" alt="VPS Installing 5"><br>
                        <img src="img/vps/6.png" class="img-fluid mb-2" alt="VPS Installing 6"><br>
                        Now let's rent it (hostname can be any), click Deploy Now:<br>
                        <img src="img/vps/7.png" class="img-fluid mb-2" alt="VPS Installing 7"><br>
                        Then click 'Products' at the top left and wait till our server's status is 'Running' (green) and
                        click on the server:<br>
                        <img src="img/vps/8.png" class="img-fluid mb-2" alt="VPS Installing 8"><br>
                        We need the following server data, copy&paste them to notepad:<br>
                        <img src="img/vps/9.png" class="img-fluid mb-2" alt="VPS Installing 9"><br>
                        Now we need to connect to the server, to do this we will use <a
                            href="https://termius.com/">Termius</a>. First of all download and install it.<br>
                        Open Terminus and click '+New Host' as shown on the screen:<br>
                        <img src="img/vps/10.png" class="img-fluid mb-2" alt="VPS Installing 10"><br>
                        In the following fields we need to type our server data (that we copied from Vultr): IP address,
                        login and pass. You can type anything in 'Label' field - this is just the name of the server for
                        your convenience.<br>
                        <img src="img/vps/11.png" class="img-fluid mb-2" alt="VPS Installing 11"><br>
                        Double click on the server, in the pop-up click 'Yes'.<br>
                        <img src="img/vps/12.png" class="img-fluid mb-2" alt="VPS Installing 12"><br>
                        <img src="img/vps/13.png" class="img-fluid mb-2" alt="VPS Installing 13"><br>
                        Now we are in, congratulations! So we can continue.
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="container">
                <div class="col-sm">
                    <div class="mb-5" id="keys">
                        <h3>1. Keys set-up</h3>
                        <div>
                            <div class="mb-4">
                                First of all we need to create directories for keys. To do it enter the following:<br>
                                <kbd>mkdir ~/keys</kbd><br>
                            </div>
                            <div class="mb-4">
                                After this we will need a link to download our keys - this link can be found in your
                                email (in case you are eligable to participate in the testnet). In order to download
                                keys, enter the following:<br>
                                <kbd>wget -O ~/keys/keys.zip %адрес_на_скачку_ключей_с_почты%</kbd><br>
                                Result should be the following:<br>
                                <kbd>wget -O ~/keys/keys.zip
                                    https://storage.googleapis.com/testworldkeys/asloidfo3129021hfs8982j.zip</kbd><br>
                            </div>
                            <div class="mb-4">
                                Then we need to unzip keys, to do this enter the following:
                                <kbd>apt install unzip</kbd><br>
                                <kbd>cd ~/keys</kbd><br>
                                <kbd>unzip keys.zip</kbd><br>
                            </div>
                            <div class="mb-4">
                                As a result 2 files should appear in the folder, names should be in the following
                                format:<br>
                                <kbd>extra_fish_%number%</kbd> and <kbd>extra_fish_%number%.pub</kbd>, let's rename them
                                for our convenience:<br>
                                To do it, type the following:<br>
                                <kbd>mv extra_fish_%number% mina-wallet</kbd><br>
                                <kbd>mv extra_fish_%number%.pub mina-wallet.pub</kbd><br>
                                <kbd>cd</kbd><br>
                            </div>
                            <div class="mb-4">
                                Now let's set access rights for our keys:<br>
                                <kbd>chmod 700 $HOME/keys</kbd><br>
                                <kbd>chmod 600 $HOME/keys/mina-wallet</kbd><br>
                            </div>
                            <div class="mb-4">
                                Now let's set variables <kbd>KEYPATH</kbd> and <kbd>MINA_PUBLIC_KEY</kbd>. For the
                                convenience let's set them in <kbd>.bashrc</kbd><br>
                                <kbd>echo 'export KEYPATH=$HOME/keys/mina-wallet' >> $HOME/.bashrc</kbd><br>
                                <kbd>echo 'export MINA_PUBLIC_KEY=$(cat $HOME/keys/mina-wallet.pub)' >>
                                    $HOME/.bashrc</kbd><br>
                                <kbd>source ~/.bashrc</kbd><br>
                            </div>
                            <div class="mb-4">
                                After that we need to download the list of peers:<br>
                                <kbd>wget -O ~/peers.txt
                                    https://raw.githubusercontent.com/MinaProtocol/coda-automation/bug-bounty-net/terraform/testnets/testworld/peers.txt</kbd>
                            </div>
                            <div class="alert alert-warning mt-3">
                                <p>Attention! Update peers once in 3 hours using <a
                                        href="https://github.com/AkiAfroo/minacheckpeers">@AkiAfroo</a>script, to do
                                    this execute the following:</a></p>
                                <kbd>wget
                                    https://raw.githubusercontent.com/AkiAfroo/minacheckpeers/main/checkpeers</kbd><br>
                                <kbd>chmod +x checkpeers</kbd><br>
                                <kbd>bash checkpeers</kbd><br>
                                <kbd>In the pop-up enter 'Y' (in case you have new peers), click Enter</kbd><br>
                                Once in 3 hours you need to execute <kbd>bash checkpeers</kbd> command.<br>
                            </div>
                        </div>
                    </div>
                    <div class="mb-5" id="setup">
                        <h3>2. Node Set-up with Ubuntu 18.04</h3>
                        <div>
                            <div class="mb-4">
                                As the first step here we need to open server' ports. Usually they are already opened,
                                but let's double check:<br>
                                <kbd>sudo apt install ufw</kbd><br>
                                <kbd>sudo ufw allow 22</kbd><br>
                                <kbd>sudo ufw allow 8302</kbd><br>
                                <kbd>sudo ufw allow 8303</kbd><br>
                                <kbd>sudo ufw enable</kbd><br>
                            </div>

                            <div class="mb-4">
                                Then let's set-up the node itself:<br>
                                <kbd>sudo apt-get remove -y coda-testnet-postake-medium-curves</kbd><br>
                                <kbd>mkdir .coda-config</kbd><br>
                                <kbd>sudo apt-get update</kbd><br>
                                <kbd>sudo apt-get install -y apt-transport-https ca-certificates</kbd><br>
                                <kbd>echo "deb [trusted=yes] http://packages.o1test.net release main" | sudo tee
                                    /etc/apt/sources.list.d/mina.list</kbd><br>
                                <kbd>sudo apt-get update</kbd><br>
                                <kbd>sudo apt-get install -y curl mina-testnet-postake-medium-curves=0.2.5-d44a133
                                    --allow-downgrades</kbd><br>
                                Let's check the node version using <kbd>coda version</kbd> command, the version should
                                be
                                <kbd>[DIRTY]d44a1339bdbdd5ebe747124c7146f435a3f73453</kbd>,
                                <br>in case it differs either:
                                <ul>
                                    <li>This guide is outdated, the actual version you can always check in the <a
                                            href="https://minaprotocol.com/docs/getting-started">official project
                                            docs</a>
                                    </li>
                                    <li>You perform some of the previous steps incorreclty, retry from the <kbd>sudo
                                            apt-get remove -y
                                            coda-testnet-postake-medium-curves</kbd> step.</li>
                                </ul>
                                Congatz! You sucessfully set-up a MINA node.
                            </div>
                        </div>
                    </div>
                    <div class="mb-5" id="mining">
                        <h3>3. Mining Preparations</h3>
                        <div class="mb-4">
                            Before the start we need to do the following steps: import account and unlock the key:<br>
                            <kbd>coda accounts import -privkey-path $KEYPATH</kbd><br>
                            In the pop-up enter your private key (from the email you got before), and set the password
                            for the account - remember this password, you will need it to unlock your account
                            further.<br>
                        </div>
                        <div class="mb-4">
                            In case everything went well you'll get "Successful" message.<br>
                            <kbd>coda accounts unlock -public-key $MINA_PUBLIC_KEY</kbd>
                        </div>
                    </div>
                    <div class="mb-5" id="launch">
                        <h3>4. Node Launch</h3>
                        <div class="mb-4">
                            In order to launch the node, enter the following commands:<br>
                            <kbd>screen -S mina_node</kbd><br>
                            Next:<br>
                            <kbd>CODA_PRIVKEY_PASS=%ваш_ключ_из_письма_на_почте% coda daemon -peer-list-file ~/peers.txt
                                -block-producer-key ~/keys/mina-wallet -generate-genesis-proof true -file-log-level Info
                                -run-snark-worker $MINA_PUBLIC_KEY -super-catchup</kbd><br>
                            <kbd>Ctrl + A, then D</kbd><br>
                            <div class="mb-4">
                                Check node status:<br>
                                <kbd>coda client status</kbd><br>
                                or<br>
                                <kbd>watch -n 30 "coda client status | grep -v 'ip4/'"</kbd> - in this case it will be
                                checked every 30 secs and update automatically<br>
                            </div>
                            <i>
                                * In order to get back to the node window (restart or just to check) enter the
                                following: <kbd>screen -rd mina_node</kbd><br>
                            </i>
                            Wait for the 'Synced' status in the 'Sync status' lane.
                            <br>
                            Congratulations, your node is working!
                        </div>
                    </div>
                    <div class="mb-5" id="stopper">
                        <h3>5. Snark Stopper set-up (optional)</h3>
                        <div>
                            <div class="mb-4">
                                Snark stopper is for those who set Block Producer and Snark worker on the same server.
                                <p class="alert alert-info">Snark worker uses all processing resources available, but
                                    this script stops snark worker in case we are close to block producing and resumes
                                    it when block producing is over.</p>
                            </div>
                            Install:<br>
                            <div class="mb-4">
                                <kbd>screen -S mina-snark-stopper</kbd><br>
                                <kbd>sudo apt install jq git python3-venv</kbd><br>
                                <kbd>git clone https://github.com/c29r3/mina-snark-stopper.git</kbd><br>
                                <kbd>cd mina-snark-stopper</kbd><br>
                                <kbd>python3 -m venv venv</kbd><br>
                                <kbd>source ./venv/bin/activate</kbd><br>
                                <kbd>pip3 install -r requirements.txt</kbd><br>
                            </div>
                            <div class="mb-4">
                                Now let's setup:<br>
                                <kbd>nano $HOME/mina-snark-stopper/config.yml</kbd><br>
                                <img src="img/snark-stopper-1.png" class="img-fluid mt-1 mb-1"
                                    alt="Snark Stopper 1"><br>
                                After this a text editor should appear:<br>
                                Change attributes WORKER_PUB_KEY и WORKER_FEE:<br>
                                <kbd>WORKER_PUB_KEY: YOUR_PUBLIC_KEY</kbd> replace <kbd>YOUR_PUBLIC_KEY</kbd> with
                                <kbd>$MINA_PUBLIC_KEY</kbd><br>
                                <kbd>WORKER_FEE: 1</kbd> replace <kbd>1</kbd> with <kbd>0.4-0.5</kbd><br>
                            </div>
                            <div class="mb-4">
                                Launch:<br>
                                <kbd>venv/bin/python3 snark-stopper.py</kbd><br>
                                <kbd>Ctrl + A, then D</kbd><br>
                            </div>
                            <div class="mb-4">
                                Now let's check the script status:<br>
                                <kbd>screen -rd mina-snark-stopper</kbd><br>
                                The result should be:<br>
                                <img src="img/snark-stopper-2.png" class="img-fluid mt-1 mb-1"
                                    alt="Snark Stopper 2"><br>
                            </div>
                            <div class="mb-4">
                                In case of any errors check the following:<br>
                                <ul>
                                    <li>You have the latest Snark Stopper version installed, in order to do this enter
                                        the following:
                                    </li>
                                    <ul>
                                        <li><kbd>cd ~/mina-snark-stopper</kbd></li>
                                        <li><kbd>git pull</kbd><br>If it downloaded nothing, then the version you have
                                            the latest version, itherwise enter the following:</li>
                                        <li><kbd>venv/bin/python3 snark-stopper.py</kbd><br>After this your script
                                            should work properly.</li>
                                    </ul>
                                    <li>Your Snark Wordek is working. In order to check it, enter the following:
                                        <kbd>coda
                                            client status</kbd>, in the SNARK WORKER attribute there should be your key:
                                        <img src="img/snark-stopper-3.png" class="img-fluid mt-1 mb-1"
                                            alt="Snark Stopper 3"><br>
                                        In case it's not there, execute the following:<br>
                                        <kbd>coda client set-snark-worker -address $MINA_PUBLIC_KEY</kbd><br>
                                        After this your script should work correctly, otherwise please consult<a
                                            href="https://github.com/c29r3/mina-snark-stopper/issues">the development
                                            team</a>.
                                    </li>
                                </ul>
                            </div>
                            <div class="mb-4">
                                Exit the view:<br>
                                <kbd>Ctrl + A, then D</kbd><br>
                            </div>
                            <div class="mb-4">
                                If you have:
                                <ul>
                                    <li>Node status 'Synced'</li>
                                    <li>
                                        The latest node version (type <kbd>coda version</kbd> command, it should be the
                                        same as in the header of this guide and/or <a
                                            href="https://minaprotocol.com/docs/getting-started">official project
                                            documentation</a>)
                                    </li>
                                    <li>Snark Stopper is working (in case you have it)</li>
                                </ul>
                                You have a working Mina node, congratulations!
                            </div>
                        </div>
                    </div>
                    <div class="mb-5" id="coordinator">
                        <h3>Дополнительно: установка нескольких снарк воркеров</h3>
                        <div class="alert alert-warning">
                            Эта процедура может быть полезна тем людям, которые хотят производить больше снарков и имеют
                            или же арендуют большое количество серверов.
                        </div>
                        <div class="mb-4">
                            Требования:
                            <ul>
                                <li>Несколько серверов со следующей конфигурацией:</li>
                                <ul>
                                    <li>Минимум 4 потока</li>
                                    <li>Минимум 8 гигабайт оперативной памяти</li>
                                </ul>
                            </ul>
                        </div>
                        <div class="mb-4">
                            Для установки снарк воркера нам не потребуется разворачивать полноценную ноду, достаточно
                            внести некоторые изменения в вашу основную ноду (она будет координатором для ваших
                            дополнительных серверов).<br>
                            Нам нужно добавить следующие флаги к нашей текущей ноде:
                            <ul>
                                <li>-run-snark-coordinator $MINA_PUBLIC_KEY</li>
                                <li>-snark-worker-fee 0.5</li>
                                <li>-bind-ip %ip_этого_сервера%</li>
                            </ul>
                            В результате ваша команда запуска основной ноды будет иметь такой формат:<br>
                            <kbd>CODA_PRIVKEY_PASS=%ваш_ключ_из_письма_на_почте% coda daemon -peer-list-file ~/peers.txt
                                -block-producer-key ~/keys/mina-wallet -generate-genesis-proof true -file-log-level Info
                                -run-snark-worker $MINA_PUBLIC_KEY -run-snark-coordinator $MINA_PUBLIC_KEY
                                -snark-worker-fee 0.5 -bind-ip %ip_этого_сервера% -super-catchup</kbd><br>
                            Также нам нужно внести адреса наших серверов со снарк воркерами в белый список (это
                            необходимо делать каждый раз при запуске ноды).<br>
                            Делается это следующей командой:<br>
                            <kbd>coda advanced client-trustlist add -ip-address
                                %IP_адрес_сервера_снарк_вокера%/32</kbd><br>
                            Повторять эту команду необходимо для каждого вашего снарк воркер сервера.
                        </div>
                        <div class="mb-4">
                            На серверах, которые будут снарк-воркерами нужно выполнить следующие команды:<br>
                            <kbd>mkdir .coda-config</kbd><br>
                            <kbd>sudo apt-get update</kbd><br>
                            <kbd>sudo apt-get install -y apt-transport-https ca-certificates</kbd><br>
                            <kbd>echo "deb [trusted=yes] http://packages.o1test.net release main" | sudo tee
                                /etc/apt/sources.list.d/mina.list</kbd><br>
                            <kbd>sudo apt-get update</kbd><br>
                            <kbd>sudo apt-get install -y curl mina-testnet-postake-medium-curves=0.2.5-d44a133
                                --allow-downgrades</kbd><br>
                            Далее нам необходимо подключиться к нашему снарк координатору (основной ноде), для этого
                            выполняем следующие команды:<br>
                            <kbd>screen -S snark_node</kbd><br>
                            <kbd>coda internal snark-worker -daemon-address %IP_адрес_сервера_снарк_координатора:8301
                                -proof-level full -shutdown-on-disconnect false</kbd><br>
                            После этого начнется запуск снарк воркера и скачка необходимых файлов, а в дальнейшем вы
                            будете наблюдать обычные сообщения о работе снарк воркера формата "SNARK work $work_ids
                            received from $address" и тому подобные<br>
                        </div>
                    </div>
                    <div class="mb-5">
                        <h3>Useful additional information:</h3>
                        <div>
                            <h5>Links</h5>
                            Mina explorer - <a href="https://minaexplorer.com/">minaexplorer.com</a><br>
                            Official documentation - <a
                                href="https://minaprotocol.com/docs/getting-started">minaprotocol.com</a><br>
                            Mina Snark Stopper - <a
                                href="https://github.com/c29r3/mina-snark-stopper">github.com</a><br>
                            Mina Peers Checker - <a href="https://github.com/AkiAfroo/minacheckpeers">github.com</a>
                            <h5>Commands:</h5>
                            <strong>Block producing:</strong><br>
                            <kbd>coda client set-staking -public-key $MINA_PUBLIC_KEY</kbd> - set block producing to the
                            address $MINA_PUBLIC_KEY<br>
                            <strong>Snark producing:</strong><br>
                            <kbd>coda client set-snark-worker -address $MINA_PUBLIC_KEY</kbd> - set Snark Worker to work
                            for the address $MINA_PUBLIC_KEY<br>
                            <kbd>coda client set-snark-work-fee 0.5</kbd> - set Snark fee as 0.5 (recommended commission
                            is 0.4-0.5)<br>
                            <strong>Send transactions:</strong><br>
                            <kbd>coda client send-payment -amount 0.01 -receiver receiver_address -fee 100 -sender
                                $MINA_PUBLIC_KEY</kbd> - send transaction of 0.01 with the fee of 100 to the address
                            <kbd>receiver_address</kbd> (in order to send the account should be unlocked with <kbd>coda
                                accounts unlock -public-key $MINA_PUBLIC_KEY</kbd>)
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="js/script.js" async defer></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous">
    </script>
</body>

</html>